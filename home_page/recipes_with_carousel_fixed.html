<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Recipe Feed with Carousel</title>
  <link rel="stylesheet" href="recipes_carousel_styles.css" />
</head>
<body>
  <header>
    <h1>Plated Stories</h1>
    <div>
      <p id="typing-text"></p>
    </div>
    <button id="share-recipe-btn">Share a New Recipe</button>
  </header>

  <main>
    <section class="carousel-container">
      <button class="carousel-btn prev-btn" aria-label="Previous recipes">&#10094;</button>
      <section class="recipe-feed" id="recipe-feed">
        <!-- Recipe cards will be dynamically added here -->
      </section>
      <button class="carousel-btn next-btn" aria-label="Next recipes">&#10095;</button>
    </section>
  </main>

  <!-- Share Recipe Modal -->
  <div id="share-recipe-modal" class="modal hidden">
    <div class="modal-content">
      <h2>Share a New Recipe</h2>
      <form id="share-recipe-form">
        <label for="recipe-title">Title</label>
        <input type="text" id="recipe-title" name="recipe-title" required />

        <label for="recipe-text">Recipe Text</label>
        <textarea id="recipe-text" name="recipe-text" rows="5" required></textarea>

        <label for="recipe-name">Your Name</label>
        <input type="text" id="recipe-name" name="recipe-name" required />

        <label for="recipe-place">Your Location</label>
        <input type="text" id="recipe-place" name="recipe-place" required />

        <label for="recipe-image">Upload Photo</label>
        <input type="file" id="recipe-image" name="recipe-image" accept="image/*" />

        <div class="modal-buttons">
          <button type="submit">Post Recipe</button>
          <button type="button" id="cancel-btn">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Recipe Preview Modal -->
  <div id="recipe-preview-modal" class="modal hidden">
    <div class="modal-content" id="recipe-preview-content">
      <button id="close-preview-btn" aria-label="Close preview" style="position:absolute; top:0.5rem; right:0.5rem; font-size:2rem; background:none; border:none; color: var(--first-color-dark); cursor:pointer; z-index: 10;">&times;</button>
      <img id="preview-image" src="" alt="Recipe Image" style="width:100%; border-radius:10px; margin-bottom:1rem; position: relative; z-index: 1;" />
      <h2 id="preview-title"></h2>
      <p id="preview-text">Classic Italian pasta dish made with eggs, cheese, pancetta, and pepper. This recipe is a bit lengthy to test scrolling functionality in the modal popup. Start by boiling pasta until al dente. In a separate pan, cook pancetta until crispy. Beat eggs with grated cheese and pepper. Combine pasta with pancetta and remove from heat. Quickly mix in egg mixture to create a creamy sauce without scrambling the eggs. Serve immediately with extra cheese and pepper on top.</p>
      <p><strong>By:</strong> <span id="preview-name"></span> from <span id="preview-place"></span></p>
      <p><small id="preview-timestamp"></small></p>

      <!-- Upvote/Downvote Section -->
      <div id="vote-section" style="margin-top: 1rem; display: flex; align-items: center; gap: 1rem; position: relative;">
        <button id="upvote-btn" aria-label="Upvote" title="Upvote" style="cursor:pointer; font-size: 1.5rem;">&#128077;</button>
        <span id="upvote-count">0</span>
        <button id="downvote-btn" aria-label="Downvote" title="Downvote" style="cursor:pointer; font-size: 1.5rem;">&#128078;</button>
        <span id="downvote-count">0</span>
        <button id="save-btn" aria-label="Save Recipe" title="Save Recipe" style="position: absolute; right: 0; bottom: -10px; background: none; border: none; cursor: pointer; font-size: 1.8rem; color: var(--first-color-dark); padding: 0;">
          <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="24" height="24" viewBox="0 0 50 50" fill="none" stroke="var(--first-color-dark)" stroke-width="2" stroke-linejoin="round" stroke-linecap="round" id="save-icon">
            <path d="M 12.8125 2 C 12.335938 2.089844 11.992188 2.511719 12 3 L 12 47 C 11.996094 47.359375 12.1875 47.691406 12.496094 47.871094 C 12.804688 48.054688 13.1875 48.054688 13.5 47.875 L 25 41.15625 L 36.5 47.875 C 36.8125 48.054688 37.195313 48.054688 37.503906 47.871094 C 37.8125 47.691406 38.003906 47.359375 38 47 L 38 3 C 38 2.449219 37.550781 2 37 2 L 13 2 C 12.96875 2 12.9375 2 12.90625 2 C 12.875 2 12.84375 2 12.8125 2 Z M 14 4 L 36 4 L 36 45.25 L 25.5 39.125 C 25.191406 38.945313 24.808594 38.945313 24.5 39.125 L 14 45.25 Z"></path>
          </svg>
        </button>
      </div>
      <div id="save-dialog" class="save-dialog hidden">Saved</div>

      <!-- Comment Section -->
      <section id="comment-section" style="margin-top: 1.5rem;">
        <h3>Comments</h3>
        <ul id="comment-list" style="list-style: none; padding-left: 0; max-height: 150px; overflow-y: auto; border: 1px solid var(--first-color-darken); border-radius: 8px; padding: 0.5rem; background-color: #222;"></ul>
        <form id="comment-form" style="margin-top: 0.5rem; display: flex; gap: 0.5rem; flex-wrap: wrap; align-items: center;">
          <input type="text" id="commenter-name" placeholder="Your name" required style="flex-basis: 30%; padding: 0.5rem; border-radius: 8px; border: 1px solid var(--first-color-darken); background-color: var(--first-color); color: var(--white-color);">
          <input type="text" id="comment-input" placeholder="Add a comment..." required style="flex-grow: 1; padding: 0.5rem; border-radius: 8px; border: 1px solid var(--first-color-darken); background-color: var(--first-color); color: var(--white-color);">
          <button type="submit" style="background-color: var(--first-color-dark); color: var(--first-color); border: none; padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer;">Post</button>
        </form>
      </section>
    </div>
  </div>

  <script src="recipes_carousel_script.js"></script>
</body>
</html>
